# S&P 500 High Tracker

A Python toolkit for tracking 52-week highs and all-time highs for S&P 500 stocks. Identifies breakout opportunities and generates AI-powered trading insights.

## Features

- **S&P 500 Coverage** - Track all 500 stocks in the S&P 500 index
- **52-Week High Tracking** - Monitor stocks approaching or at their 52-week highs
- **All-Time High Detection** - Identify stocks making new all-time highs
- **Breakout Alerts** - Detect when stocks break to new highs
- **Momentum Analysis** - Track daily/weekly price momentum and movement toward highs
- **Sentiment Analysis** - VADER-based news sentiment for each stock
- **AI Insights** - LangChain + GPT powered analysis for breakout trading

## Project Structure

```
nasdaq_high_tracker/
â”œâ”€â”€ fetch_tickers.py    # Fetches S&P 500 tickers from Wikipedia â†’ ticker.txt
â”œâ”€â”€ ticker.txt          # List of tickers to track (generated)
â”œâ”€â”€ snapshot.py         # Fetches current quotes, 52W high, and ATH data
â”œâ”€â”€ sentiment.py        # News headlines and VADER sentiment analysis
â”œâ”€â”€ tracker.py          # Main orchestrator - history, breakouts, momentum
â”œâ”€â”€ agent.py            # AI-powered breakout analysis (LangChain + GPT)
â”œâ”€â”€ requirements.txt    # Python dependencies
â”œâ”€â”€ high_tracker_history.csv  # Historical data log (generated)
â”œâ”€â”€ high_analysis.md    # AI analysis log (generated)
â””â”€â”€ nasdaq_highs_table.png    # Visual table export (generated)
```

## Tracked Stocks

By default, tracks all **500 stocks** in the S&P 500 index. The ticker list is fetched from Wikipedia and stored in `ticker.txt`.

To update the ticker list:
```bash
python fetch_tickers.py
```

## Installation

```bash
# Clone or navigate to the project
cd nasdaq_high_tracker

# Install dependencies
pip install -r requirements.txt

# Download NLTK data (first run only)
python -c "import nltk; nltk.download('vader_lexicon')"
```

## Configuration

Set your OpenAI API key for AI analysis:

```bash
# Windows PowerShell
$env:OPENAI_API_KEY = "your-api-key-here"

# Linux/Mac
export OPENAI_API_KEY="your-api-key-here"
```

## Usage

### Step 1: Fetch S&P 500 Tickers (First Time / Periodic Update)

```bash
python fetch_tickers.py
```

This creates `ticker.txt` with all ~500 S&P 500 tickers. Run this periodically to keep the list updated when index constituents change.

### Step 2: Run the Full Tracker

```bash
python tracker.py
```

This will:
1. Load tickers from `ticker.txt`
2. Fetch current prices and high data for all stocks
3. Analyze news sentiment
4. Detect any new high breakouts
5. Compute momentum metrics
6. Generate AI trading insights
7. Save history and analysis to files

### Individual Modules

```bash
# Fetch S&P 500 ticker list
python fetch_tickers.py

# Just fetch price/high snapshot
python snapshot.py

# Just fetch sentiment
python sentiment.py

# Just run AI analysis (requires history)
python agent.py
```

## Output Files

| File | Description |
|------|-------------|
| `ticker.txt` | S&P 500 ticker list (generated by fetch_tickers.py) |
| `high_tracker_history.csv` | Time-series data of all snapshots |
| `high_analysis.md` | Timestamped AI analysis log |
| `nasdaq_highs_table.png` | Visual table of current data |
| `news_summary.png` | News headlines summary image |

## Key Metrics

- **% From 52W High** - How far below the 52-week high (0% = at high)
- **% From ATH** - How far below all-time high (0% = at ATH)
- **At 52W High** - True if within 2% of 52-week high
- **At ATH** - True if within 2% of all-time high
- **High Momentum** - Positive = moving toward high, Negative = moving away
- **Sentiment** - Bullish/Neutral/Bearish based on news

## Example Output

```
ðŸŽ¯ NASDAQ HIGH TRACKER
   2026-01-23 15:00 UTC
======================================================================

ðŸ”¥ Stocks at 52-Week High (5):
   NVDA   $  890.50  (+0.50% from high)
   META   $  520.30  (-1.20% from high)
   ...

ðŸš€ Stocks at All-Time High (2):
   NVDA   $  890.50  (+0.50% from ATH)
   COST   $  920.00  (-0.30% from ATH)

âš¡ NEW BREAKOUTS DETECTED:
   NVDA   $  890.50  â†’ New 52W High, ATH!

ðŸ“ˆ Top 5 Stocks Moving Toward Highs:
   AMD    $  178.00  Momentum: +2.50%  (-8.20% from high)
   ...
```

## Trading Strategy Tips

1. **Breakout Entries** - Buy stocks breaking to new 52W highs with bullish sentiment
2. **ATH Continuation** - Stocks at ATH often continue higher; buy pullbacks
3. **Approaching Highs** - Watch stocks within 5% of highs for potential breakouts
4. **Avoid Bearish Sentiment** - Even at highs, negative news can cause reversals

## License

MIT License - See LICENSE file for details.
